tinymce.PluginManager.add("imgembedder",function(e,t){e.addButton("imgembedder",{text:"Embed",icon:"image",onclick:function(){var i={title:"Image Embedder",file:t+"/embed.html",width:400,height:250,onsubmit:function(){},buttons:[{text:"Ok",onclick:function(){var t=e.windowManager.getWindows()[0],i=t.getContentWindow().document,n=i.getElementById("imgtitle"),o=i.getElementById("imgheight"),l=i.getElementById("imgwidth"),r=i.getElementById("images"),a=i.getElementById("flow"),g=new FileReader;g.onprogress=function(){tinymce.activeEditor.setProgressState(!0)},g.onloadend=function(e){if(e.target.result){var t={src:e.target.result,alt:null,title:null,height:null,width:null,style:""};n&&n.value&&(t.alt=n.value,t.title=n.value),o&&o.value&&(t.height=o.value),l&&l.value&&(t.width=l.value),a&&a.checked&&(t.style="float:left; margin-right: 1em; margin-bottom: 1em;"),tinyMCE.activeEditor.selection.setContent(tinyMCE.activeEditor.dom.createHTML("img",t))}tinymce.activeEditor.setProgressState(!1)},g.onerror=function(e){console.log(e.error.message)};for(var d=0;d<r.files.length;d++)g.readAsDataURL(r.files[d]);t.close()}},{text:"Close",onclick:"close"}]};e.windowManager.open(i)},getInfo:function(){return{longname:"Image Embedder",author:"Wilby C. Jackson Jr.",authorurl:"https://github.com/wilby",infourl:"https://github.com/wilby/tmce_imgembedder",version:"1.0"}}})});